

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Architecture de Symfony &mdash; documentation Symfony 1.0.1</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/sphinxcontrib-images/LightBox2/lightbox2/css/lightbox.css" type="text/css" />
  

  
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/sphinxcontrib-images/LightBox2/lightbox2/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/sphinxcontrib-images/LightBox2/lightbox2/js/lightbox.min.js"></script>
    <script type="text/javascript" src="../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    <link rel="top" title="documentation Symfony 1.0.1" href="../index.html"/>
        <link rel="next" title="Sujet du TP" href="../tp/sujet.html"/>
        <link rel="prev" title="Du navigateur vers Symfony" href="navigateur_vers_symfony.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

        
            
              <a href="../index.html"> Symfony
            
        
        </a>

        
          <div class="subtitle">
            Cours
          </div>
        

        
          <div class="reference">
            EPSI/B2

            
            - v1.0.1
            
          </div>
        
          
        </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">Rappels</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rappels/introduction.html">Programmation en PHP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rappels/usages.html">Que peut faire PHP ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rappels/syntaxe.html">La syntaxe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rappels/fonctions.html">Les fonctions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rappels/poo.html">La programmation orientée objet</a></li>
</ul>
<p class="caption"><span class="caption-text">Cours</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction à Symfony</a></li>
<li class="toctree-l1"><a class="reference internal" href="navigateur_vers_symfony.html">Du navigateur vers Symfony</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Architecture de Symfony</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#architecture-conceptuelle">Architecture conceptuelle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#modele-vue-controleur">Modèle/Vue/Contrôleur</a></li>
<li class="toctree-l3"><a class="reference internal" href="#service-oriented">Service-oriented</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#l-architecture-des-fichiers">L&#8217;architecture des fichiers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#le-repertoire-app">Le répertoire <em>/app</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#le-repertoire-bin">Le répertoire <em>/bin</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#le-repertoire-src">Le répertoire <em>/src</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#le-repertoire-vendor">Le répertoire <em>/vendor</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#le-repertoire-web">Le répertoire <em>/web</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#les-fichiers-composer">Les fichiers <em>/composer.*</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="#les-fichiers-md">Les fichiers <em>/*.md</em></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#les-bundles">Les bundles</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">tp</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tp/sujet.html">Sujet du TP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tp/installation-php.html">Installation et configuration de PHP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tp/installation-symfony.html">Installation de Symfony</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tp/bundle.html">Création du bundle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tp/controleur.html">Créer une page sous Symfony</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tp/web_profiler.html">Le web-profiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tp/routing.html">Les routes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tp/assets.html">Les assets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tp/entite.html">Les entités</a></li>
</ul>
<p class="caption"><span class="caption-text">Aide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../aide/console.html">Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aide/controller.html">Contrôlleur</a></li>
</ul>

          
        


          

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Symfony</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Architecture de Symfony</li>
    <li class="wy-breadcrumbs-aside">
      
        

      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="architecture-de-symfony">
<h1>Architecture de Symfony<a class="headerlink" href="#architecture-de-symfony" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="architecture-conceptuelle">
<span id="id1"></span><h2>Architecture conceptuelle<a class="headerlink" href="#architecture-conceptuelle" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="modele-vue-controleur">
<h3>Modèle/Vue/Contrôleur<a class="headerlink" href="#modele-vue-controleur" title="Lien permanent vers ce titre">¶</a></h3>
<p>Symfony est basée sur une architecture <strong>MVC</strong> qui signifie <strong>Modèle/Vue/Contrôleur</strong>. C&#8217;est un découpage très répandu dans les frameworks web.</p>
<p>L&#8217;idée est d&#8217;organiser le code en séparant les données, leurs présentations et leurs traitements. Cette séparation rends les applications, même complexes, plus facile à maintenir et à faire évoluer.</p>
<p>Elle se compose de trois couches :</p>
<ul>
<li><dl class="first docutils">
<dt>Le <strong>contrôleur</strong> (<em>controller</em>)</dt>
<dd><p class="first last">Son rôle est de générer la <strong>réponse</strong> à la <strong>requête</strong> HTTP demandée par le visiteur. Il analyse la requête du visiteur, et <strong>utilise les autres composants</strong> pour composer la réponse et la renvoie au visiteur.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Le <strong>modèle</strong> (<em>model</em>)</dt>
<dd><p class="first last">Il est responsable des données et de tous les traitements faits sur les données. Rien d&#8217;autre dans l&#8217;application ne doit manipuler les données afin de garantir leur intégrité.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>La <strong>vue</strong> (<em>vue</em>)</dt>
<dd><p class="first last">Elle est chargée de générer les interfaces utilisateurs, généralement basées sur les données. Elle peut présenter les données sous plusieurs formes : HTML, json, XML, etc.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="service-oriented">
<h3>Service-oriented<a class="headerlink" href="#service-oriented" title="Lien permanent vers ce titre">¶</a></h3>
<p>Comme dit précédemment, un contrôleur ne fait qu&#8217;utiliser d&#8217;autres composants pour construire la réponse. La plupart de ces composants sont des services.</p>
<p>L&#8217;objectif de l&#8217;architecture orientée services (service oriented architecture, SOA, en anglais) est de déposer une fonctionnalité en un ensemble de fonctions basiques, appelées <strong>services</strong>.</p>
<p>Concrètement, les services sont des objets PHP qui gèrent une tâche précise comme envoyer un mail, gérer les sessions de l&#8217;utilisateur ou persister des données. Tous les services sont regroupé dans le <strong>service container</strong> qui se charge de les instancier.</p>
</div>
</div>
<div class="section" id="l-architecture-des-fichiers">
<span id="architecture-fichier"></span><h2>L&#8217;architecture des fichiers<a class="headerlink" href="#l-architecture-des-fichiers" title="Lien permanent vers ce titre">¶</a></h2>
<p>Dans les sources que nous venons de d&#8217;installer, il n&#8217;y a pas beaucoup de fichiers :</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ ls -A1 ~/symfony
ls: impossible d&#39;accéder à ~/symfony: Aucun fichier ou dossier de ce type
</pre></div>
</div>
<p>Voyons à quoi ils correspondent.</p>
<div class="section" id="le-repertoire-app">
<h3>Le répertoire <em>/app</em><a class="headerlink" href="#le-repertoire-app" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce répertoire contient tout ce qui concerne votre application, sauf son code source.</p>
<p>Le code source de votre application implémente ses fonctionnalités. Tout le reste comme la configuration, le cache, les logs, etc., c&#8217;est dans le répertoire <em>/app</em></p>
</div>
<div class="section" id="le-repertoire-bin">
<h3>Le répertoire <em>/bin</em><a class="headerlink" href="#le-repertoire-bin" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce répertoire n&#8217;est pas tout le temps présent. Il contient des exécutables fournis par les bundles.</p>
</div>
<div class="section" id="le-repertoire-src">
<h3>Le répertoire <em>/src</em><a class="headerlink" href="#le-repertoire-src" title="Lien permanent vers ce titre">¶</a></h3>
<p>Voici le répertoire dans lequel on mettra notre code source ! Ce code est découpé en <em>bundles</em>.</p>
<p>Après l&#8217;installation de Symfony, ce répertoire n&#8217;est pas vide. Il contient un bundle de démo (Acme) et une ébauche de bundle. Ces deux bundles seront supprimés.</p>
</div>
<div class="section" id="le-repertoire-vendor">
<h3>Le répertoire <em>/vendor</em><a class="headerlink" href="#le-repertoire-vendor" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce répertoire contient toutes les librairies externes de notre application comme Symfony, Doctrine, Twig, SwiftMailer, etc.</p>
<div class="hint admonition">
<p class="first admonition-title">Qu&#8217;est ce qu&#8217;une librairie ?</p>
<p class="last">Un librairie est une boite noire qui rempli une fonction bien précise et dont on peut se servir dans notre code. On ne sais pas comment elle fonctionne, mais on sais comment s&#8217;en servir.</p>
</div>
</div>
<div class="section" id="le-repertoire-web">
<h3>Le répertoire <em>/web</em><a class="headerlink" href="#le-repertoire-web" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce répertoire contient tous les fichiers destinés aux visiteurs : image, CSS, Javascript, etc. Il contient également les contrôleurs frontaux <code class="docutils literal"><span class="pre">app.php</span></code> et <code class="docutils literal"><span class="pre">app_dev.php</span></code>. C&#8217;est le seul répertoire accessible aux visiteurs.</p>
<div class="hint admonition">
<p class="first admonition-title">Contrôleur frontal</p>
<p class="last">Le contrôleur front est le point d&#8217;entrée par lequel passe toutes les pages. Dans Symfony, il y en a deux : un pour le développement l&#8217;autre pour les autres environnement.</p>
</div>
</div>
<div class="section" id="les-fichiers-composer">
<h3>Les fichiers <em>/composer.*</em><a class="headerlink" href="#les-fichiers-composer" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le fichier <code class="docutils literal"><span class="pre">composer.json</span></code> contient les instructions destinées à composer pour qu&#8217;il installe les librairies externes. À chaque installation ou mise à jour de librairie, il écrit dans le fichier <code class="docutils literal"><span class="pre">composer.lock</span></code> les versions exactes de chaque librairie qu&#8217;il a installé. Ensuite, lors du déploiement de l&#8217;application sur les autres environnements, comme en production, on pourra installer les mêmes versions que lors des développements grâce à composer.</p>
</div>
<div class="section" id="les-fichiers-md">
<h3>Les fichiers <em>/*.md</em><a class="headerlink" href="#les-fichiers-md" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le reste des fichiers contient de la documentation.</p>
</div>
</div>
<div class="section" id="les-bundles">
<h2>Les bundles<a class="headerlink" href="#les-bundles" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme dit précédemment, un bundle contient tout le code source nécessaire pour implémenter la ou les fonctionnalités pour lesquelles il est prévu. Quand on dit tout le code source, il s&#8217;agit :</p>
<ul class="simple">
<li>des contrôleurs</li>
<li>des modèles</li>
<li>des vues</li>
<li>des commandes</li>
<li>des services</li>
<li>des assets (images, javascript, CSS)</li>
<li>des dépendances (librairies)</li>
<li>des outils de débug</li>
<li>etc.</li>
</ul>
<p>Tout ces éléments sont organisés dans des répertoires. Par convention les voici :</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Répertoire</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Commandes</td>
<td>Command/</td>
</tr>
<tr class="row-odd"><td>Contrôleurs</td>
<td>Controller/</td>
</tr>
<tr class="row-even"><td>Extensions du Conteneur de Services</td>
<td>DependencyInjection/</td>
</tr>
<tr class="row-odd"><td>Listeners d&#8217;Évènements</td>
<td>EventListener/</td>
</tr>
<tr class="row-even"><td>Configuration</td>
<td>Resources/config/</td>
</tr>
<tr class="row-odd"><td>Ressources Web</td>
<td>Resources/public/</td>
</tr>
<tr class="row-even"><td>Fichiers de traduction</td>
<td>Resources/translations/</td>
</tr>
<tr class="row-odd"><td>Templates</td>
<td>Resources/views/</td>
</tr>
<tr class="row-even"><td>Tests Unitaires et Fonctionnels</td>
<td>Tests/</td>
</tr>
<tr class="row-odd"><td>Exceptions</td>
<td>Exception</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tp/sujet.html" class="btn btn-neutral float-right" title="Sujet du TP" accesskey="n">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="navigateur_vers_symfony.html" class="btn btn-neutral" title="Du navigateur vers Symfony" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

    <p>
        &copy; Copyright 2014, Madeline VEYRENC.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>