

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Les vues avec Twig &mdash; Symfony 1.0.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Symfony 1.0.0 documentation" href="index.html"/>
        <link rel="next" title="Doctrine et la base de donnée" href="doctrine.html"/>
        <link rel="prev" title="Les services" href="services.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> Symfony</a>
        
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction à Symfony</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#qu-est-ce-qu-un-framework">Qu&#8217;est ce qu&#8217;un framework ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#pourquoi-utiliser-un-framework">Pourquoi utiliser un framework ?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rappel.html">Quelques rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="pre-requis_installation.html">Pré-requis et installation du framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pre-requis_installation.html#pre-requis">Pré-requis</a></li>
<li class="toctree-l2"><a class="reference internal" href="pre-requis_installation.html#installation-de-symfony">Installation de Symfony</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture de Symfony</a><ul>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#l-architecture-des-fichiers">L&#8217;architecture des fichiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#architecture-conceptuelle">Architecture conceptuelle</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#les-bundles">Les bundles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="application_symfony.html">Création d&#8217;un bundle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="application_symfony.html#utilisation-de-la-console">Utilisation de la console</a></li>
<li class="toctree-l2"><a class="reference internal" href="application_symfony.html#creation-du-bundle">Création du bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="application_symfony.html#que-s-est-il-passe">Que s&#8217;est-il passé ?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="application_symfony.html#objectif-de-notre-bundle-un-blog">Objectif de notre bundle : un blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing.html">Le routing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="routing.html#fonctionnement">Fonctionnement</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html#convention-de-nommage-des-controleurs">Convention de nommage des contrôleurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html#controles-des-parametres-des-routes">Contrôles des paramètres des routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html#parametres-speciaux-de-routing">Paramètres spéciaux de routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html#comment-generer-des-url">Comment générer des URL ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html#creons-les-routes-du-blog">Créons les routes du blog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="controleur.html">Les contrôleurs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="controleur.html#request-et-response"><tt class="docutils literal"><span class="pre">Request</span></tt> et <tt class="docutils literal"><span class="pre">Response</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="controleur.html#l-objet-request">L&#8217;objet <tt class="docutils literal"><span class="pre">Request</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="controleur.html#l-objet-response">L&#8217;objet <tt class="docutils literal"><span class="pre">Response</span></tt></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="services.html">Les services</a><ul>
<li class="toctree-l2"><a class="reference internal" href="services.html#acceder-un-service">Accéder un service</a></li>
<li class="toctree-l2"><a class="reference internal" href="services.html#exemple-de-services">Exemple de services</a></li>
<li class="toctree-l2"><a class="reference internal" href="services.html#obtenir-des-informations-sur-les-services">Obtenir des informations sur les services</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Les vues avec Twig</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#le-base">Le base</a></li>
<li class="toctree-l2"><a class="reference internal" href="#acces-aux-variables">Accès aux variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#affectation-de-variables">Affectation de variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-filtres">Les filtres</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-fonctions">Les fonctions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-structures-de-controle">Les structures de contrôle</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inclusion-de-template">Inclusion de template</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heritage-de-template">Héritage de template</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-macros">Les macros</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-types-de-variables">Les types de variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-operateurs">Les opérateurs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="doctrine.html">Doctrine et la base de donnée</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Symfony</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Les vues avec Twig</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="les-vues-avec-twig">
<h1>Les vues avec Twig<a class="headerlink" href="#les-vues-avec-twig" title="Permalink to this headline">¶</a></h1>
<p>Symfony utilise le moteur de templating Twig pour aider au rendu des pages. Il présente plusieurs avantages :</p>
<ul class="simple">
<li>il compile les templates en code PHP optimisé</li>
<li>il possède toutes les structures de contrôle classiques</li>
<li>la syntaxe qu&#8217;il propose est compacte et souvent plus rapide à taper</li>
<li>il propose nativement un grand nombre de méthodes et de filtres</li>
<li>il propose un système avancé de blocs, macros et d&#8217;héritage qui permet de facilement factoriser le code</li>
</ul>
<p>Voyons un exemple. Voici un exemple de code en PHP et son équivalent en Twig :</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;navigation&quot;</span><span class="nt">&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$navigation</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="nt">&lt;li&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">getHref</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;navigation&quot;</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">navigation</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">item.href</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">item.name</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<div class="section" id="le-base">
<h2>Le base<a class="headerlink" href="#le-base" title="Permalink to this headline">¶</a></h2>
<p>Retournons à l&#8217;origine de l&#8217;appel du template, c&#8217;est à dire dans le contrôleur et ajoutons quelques paramètres au template :</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;EpsiBlogBundle:Blog:show.html.twig&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">,</span>
            <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Post du blog&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">\DateTime</span><span class="p">(),</span>
            <span class="s1">&#39;tags&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;php&#39;</span><span class="p">,</span> <span class="s1">&#39;symfony&#39;</span> <span class="p">),</span>
            <span class="s1">&#39;html&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&lt;b&gt;ceci est du texte en gras&lt;/b&gt;&#39;</span>
        <span class="p">));</span>
</pre></div>
</div>
<p>Ensuite enrichissons un peu le template d&#8217;affichage :</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Blog<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1&gt;</span>Blog<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;h2&gt;</span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">date</span><span class="o">|</span><span class="nf">date</span><span class="o">(</span><span class="s2">&quot;m/d/Y&quot;</span><span class="o">)</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;ul&gt;</span>
            <span class="cp">{%</span> <span class="k">for</span> <span class="nv">tag</span> <span class="k">in</span> <span class="nv">tags</span> <span class="cp">%}</span>
                <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">tag</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
                <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
        <span class="nt">&lt;/ul&gt;</span>
        <span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">html</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">html</span><span class="o">|</span><span class="nf">raw</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;epsi_blog_index&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>Lien vers la liste des postes<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Voici le résultat :</p>
<img alt="_images/twig_resultat1.png" class="align-center" src="_images/twig_resultat1.png" />
<p>La syntaxe est très simple :</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">...</span> <span class="pre">}}</span></tt> <strong>affiche</strong> quelque chose ;</li>
<li><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">...</span> <span class="pre">%}</span></tt> <strong>fait</strong> quelque chose ;</li>
<li><tt class="docutils literal"><span class="pre">{#</span> <span class="pre">...</span> <span class="pre">#}</span></tt> n&#8217;affiche rien et ne fait rien : c&#8217;est la syntaxe pour les commentaires, qui peuvent être sur plusieurs lignes ;</li>
</ul>
</div>
<div class="section" id="acces-aux-variables">
<h2>Accès aux variables<a class="headerlink" href="#acces-aux-variables" title="Permalink to this headline">¶</a></h2>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# name = &#39;Jack&#39; #}</span>
<span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span>

<span class="c">{# user = array( &#39;name&#39; =&gt; &#39;Jack&#39; ) #}</span>
<span class="cp">{{</span> <span class="nv">user.name</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">user</span><span class="o">[</span><span class="s1">&#39;name&#39;</span><span class="o">]</span> <span class="cp">}}</span>

<span class="c">{# user = new User( &#39;Jack&#39; ) #}</span>
<span class="cp">{{</span> <span class="nv">user.name</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">user.getName</span> <span class="cp">}}</span>

<span class="c">{# pour forcer l&#39;appel à une méthode #}</span>
<span class="cp">{{</span> <span class="nv">user.name</span><span class="o">()</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">user.getName</span><span class="o">()</span> <span class="cp">}}</span>

<span class="c">{# passage d&#39;argument à une méthode #}</span>
<span class="cp">{{</span> <span class="nv">user.date</span><span class="o">(</span><span class="s1">&#39;Y-m-d&#39;</span><span class="o">)</span> <span class="cp">}}</span>

<span class="c">{# On peut aussi utiliser la fonction attribute #}</span>
<span class="cp">{{</span> <span class="nv">attribute</span><span class="o">(</span><span class="nv">object</span><span class="o">,</span> <span class="nv">method</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">attribute</span><span class="o">(</span><span class="nv">object</span><span class="o">,</span> <span class="nv">method</span><span class="o">,</span> <span class="nv">arguments</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">attribute</span><span class="o">(</span><span class="nv">array</span><span class="o">,</span> <span class="nv">item</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
</div>
<div class="section" id="affectation-de-variables">
<h2>Affectation de variables<a class="headerlink" href="#affectation-de-variables" title="Permalink to this headline">¶</a></h2>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">foo</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">foo</span> <span class="o">=</span> <span class="o">[</span><span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">]</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">foo</span> <span class="o">=</span> <span class="o">{</span><span class="s1">&#39;foo&#39;</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="o">}</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="les-filtres">
<h2>Les filtres<a class="headerlink" href="#les-filtres" title="Permalink to this headline">¶</a></h2>
<p>Les variables peuvent être modifiées par des filtres. Les filtres sont séparés par des pipes (<tt class="docutils literal"><span class="pre">|</span></tt>) et peuvent avoir des paramètres supplémentaire entre parenthèses.</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">name</span><span class="o">|</span><span class="nf">striptags</span><span class="o">|</span><span class="nf">title</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">list</span><span class="o">|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39;, &#39;</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>On peut également appliquer un filtre sur une portion de code :</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">filter</span> <span class="nf">upper</span> <span class="cp">%}</span>
    This text becomes uppercase
<span class="cp">{%</span> <span class="k">endfilter</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="les-fonctions">
<h2>Les fonctions<a class="headerlink" href="#les-fonctions" title="Permalink to this headline">¶</a></h2>
<p>Les fonctions sont appelées pour générer du contenu. Elles sont appelées par leur nom suivi de paramètres entre parenthèses :</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">for</span> <span class="nv">i</span> <span class="k">in</span> <span class="nv">range</span><span class="o">(</span><span class="m">0</span><span class="o">,</span> <span class="m">3</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">i</span> <span class="cp">}}</span>,
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="les-structures-de-controle">
<h2>Les structures de contrôle<a class="headerlink" href="#les-structures-de-controle" title="Permalink to this headline">¶</a></h2>
<p>Les structures de contrôle sont des tags dans Twig.</p>
<div class="section" id="conditions">
<h3>Conditions<a class="headerlink" href="#conditions" title="Permalink to this headline">¶</a></h3>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">if</span> <span class="nv">user.isSuperAdmin</span><span class="o">()</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">elseif</span> <span class="nv">user.isMember</span><span class="o">()</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="boucle">
<h3>Boucle<a class="headerlink" href="#boucle" title="Permalink to this headline">¶</a></h3>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="k">if</span> <span class="nv">iser.isActive</span><span class="o">()</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="inclusion-de-template">
<h2>Inclusion de template<a class="headerlink" href="#inclusion-de-template" title="Permalink to this headline">¶</a></h2>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">include</span> <span class="s1">&#39;header.html&#39;</span> <span class="k">with</span> <span class="o">{</span><span class="s1">&#39;foo&#39;</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="o">}</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">include</span> <span class="s1">&#39;body.html&#39;</span> <span class="nv">only</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">include</span> <span class="s1">&#39;footer.html&#39;</span> <span class="k">with</span> <span class="o">{</span><span class="s1">&#39;foo&#39;</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="o">}</span> <span class="nv">only</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Lors de l&#8217;inclusion de template, le template inclus a accès à toutes les variables du contexte courant sauf si on utilise le mot clé <tt class="docutils literal"><span class="pre">only</span></tt>. Le mot clé <tt class="docutils literal"><span class="pre">with</span></tt> permet quand à lui de passer des variables au template.</p>
</div>
<div class="section" id="heritage-de-template">
<h2>Héritage de template<a class="headerlink" href="#heritage-de-template" title="Permalink to this headline">¶</a></h2>
<p>L&#8217;héritage permet de créer un squelette définissant la structure générale des pages dans lequel on définit des blocs qui seront surchargés par les templates enfants.</p>
<p>Reprenons le template <tt class="docutils literal"><span class="pre">show.html.twig</span></tt> et copions le code dans le template <tt class="docutils literal"><span class="pre">src/Epsi/Bundle/BlogBundle/Resources/views/base.html.twig</span></tt> en remplaçant les parties spécifiques par des blocs et en l&#8217;enrichissant un peu :</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equic=</span><span class="s">&quot;Content-type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span> - Blog<span class="nt">&lt;/title&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">stylesheets</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;content&quot;</span><span class="nt">&gt;</span>
                <span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
                <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;footer&gt;</span>
                <span class="cp">{%</span> <span class="k">block</span> <span class="nv">footer</span> <span class="cp">%}</span>
                    <span class="ni">&amp;copy;</span> Copyright 2015
                <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
            <span class="nt">&lt;/footer&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">javascripts</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Il faut maintenant modifier le template <tt class="docutils literal"><span class="pre">show.html.twig</span></tt> pour lui dire d&#8217;hériter du tempalte de base et remplir les blocs :</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;EpsiBlogBundle::base.html.twig&quot;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="s1">&#39;Blog&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="nt">&lt;h1&gt;</span>Blog<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;h2&gt;</span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">date</span><span class="o">|</span><span class="nf">date</span><span class="o">(</span><span class="s2">&quot;m/d/Y&quot;</span><span class="o">)</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="cp">{%</span> <span class="k">for</span> <span class="nv">tag</span> <span class="k">in</span> <span class="nv">tags</span> <span class="cp">%}</span>
            <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">tag</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
            <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">html</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">html</span><span class="o">|</span><span class="nf">raw</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">footer</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">parent</span><span class="o">()</span> <span class="cp">}}</span>
    - <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;epsi_blog_index&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>Lien vers la liste des postes<span class="nt">&lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Twig propose beaucoup de filtres, méthodes et fonctions que vous pouvez retrouver sur la documentation officielle : <a class="reference external" href="http://twig.sensiolabs.org/">http://twig.sensiolabs.org/</a></p>
</div>
<div class="section" id="les-macros">
<h2>Les macros<a class="headerlink" href="#les-macros" title="Permalink to this headline">¶</a></h2>
<p>Les macros sont similaires à des fonctions excepté qu&#8217;elles sont écrites directement en Twig :</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# dans le template où l&#39;on veut utiliser la macro #}</span>
<span class="cp">{%</span> <span class="k">import</span> <span class="nv">macro.html.twig</span> <span class="k">as</span> <span class="nv">forms</span> <span class="cp">%}</span>

<span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">forms.input</span><span class="o">(</span><span class="s1">&#39;username&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>

<span class="c">{# dans le template où l&#39;on implémente les macros #}</span>
<span class="cp">{%</span> <span class="k">macro</span> <span class="nv">input</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="nv">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">,</span> <span class="nv">type</span> <span class="o">=</span> <span class="s2">&quot;text&quot;</span><span class="o">,</span> <span class="nv">size</span> <span class="o">=</span> <span class="m">20</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">type</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">name=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">value=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">size=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">size</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="nt">/&gt;</span>
<span class="cp">{%</span> <span class="k">endmacro</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="les-types-de-variables">
<h2>Les types de variables<a class="headerlink" href="#les-types-de-variables" title="Permalink to this headline">¶</a></h2>
<p>Les types de valeurs sont similaires aux types natifs de PHP excepté qu&#8217;il fait la différence entre les tableaux et les hashs (tableaux associatifs) :</p>
<ul class="simple">
<li>les chaînes de caractères <tt class="docutils literal"><span class="pre">&quot;Hello</span> <span class="pre">world&quot;</span></tt></li>
<li>les entiers <tt class="docutils literal"><span class="pre">42</span></tt></li>
<li>les flottants <tt class="docutils literal"><span class="pre">42.56</span></tt></li>
<li>les tableaux <tt class="docutils literal"><span class="pre">[&quot;foo&quot;,</span> <span class="pre">&quot;bar&quot;]</span></tt></li>
<li>les hashs <tt class="docutils literal"><span class="pre">{&quot;foo&quot;:</span> <span class="pre">&quot;bar&quot;}</span></tt> <tt class="docutils literal"><span class="pre">{'foo':</span> <span class="pre">'foo',</span> <span class="pre">'bar':</span> <span class="pre">'bar'}</span></tt> <tt class="docutils literal"><span class="pre">{foo:</span> <span class="pre">'foo',</span> <span class="pre">bar:</span> <span class="pre">'bar'}</span></tt> <tt class="docutils literal"><span class="pre">{2:</span> <span class="pre">'foo',</span> <span class="pre">4:</span> <span class="pre">'bar'}</span></tt></li>
<li>les booleans <tt class="docutils literal"><span class="pre">true</span></tt> et <tt class="docutils literal"><span class="pre">false</span></tt></li>
<li>le null <tt class="docutils literal"><span class="pre">null</span></tt></li>
</ul>
</div>
<div class="section" id="les-operateurs">
<h2>Les opérateurs<a class="headerlink" href="#les-operateurs" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>Mathématiques</dt>
<dd><ul class="first last simple">
<li>addition <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">1</span> <span class="pre">}}</span></tt> = 2</li>
<li>soustraction <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">3</span> <span class="pre">-</span> <span class="pre">2</span> <span class="pre">}}</span></tt> = 1</li>
<li>multiplication <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">}}</span></tt> = 4</li>
<li>division <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">1</span> <span class="pre">/</span> <span class="pre">2</span> <span class="pre">}}</span></tt> = 0.5</li>
<li>division avec arrondi <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">20</span> <span class="pre">//</span> <span class="pre">7</span> <span class="pre">}}</span></tt> = 2</li>
<li>modulo <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">20</span> <span class="pre">%</span> <span class="pre">7</span> <span class="pre">}}</span></tt> = 6</li>
<li>puissance <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">2</span> <span class="pre">**</span> <span class="pre">3</span> <span class="pre">}}</span></tt> = 8</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Logiques</dt>
<dd><ul class="first last simple">
<li>ET <tt class="docutils literal"><span class="pre">and</span></tt> (équivalent du <tt class="docutils literal"><span class="pre">&amp;&amp;</span></tt> PHP)</li>
<li>OU <tt class="docutils literal"><span class="pre">or</span></tt> (équivalent du <tt class="docutils literal"><span class="pre">||</span></tt> PHP)</li>
<li>Négation <tt class="docutils literal"><span class="pre">not</span></tt> (équivalent du <tt class="docutils literal"><span class="pre">!</span></tt> PHP)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Binaires</dt>
<dd><ul class="first last simple">
<li>ET <tt class="docutils literal"><span class="pre">b-and</span></tt> (équivalent du <tt class="docutils literal"><span class="pre">&amp;</span></tt> PHP)</li>
<li>OU <tt class="docutils literal"><span class="pre">b-or</span></tt> (équivalent du <tt class="docutils literal"><span class="pre">|</span></tt> PHP)</li>
<li>OU exclusif <tt class="docutils literal"><span class="pre">not</span></tt> (équivalent du <tt class="docutils literal"><span class="pre">^</span></tt> PHP)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Comparaisons</dt>
<dd><ul class="first last">
<li><p class="first">égalité <tt class="docutils literal"><span class="pre">==</span></tt></p>
</li>
<li><p class="first">différence <tt class="docutils literal"><span class="pre">!=</span></tt></p>
</li>
<li><p class="first">inférieur <tt class="docutils literal"><span class="pre">&lt;</span></tt></p>
</li>
<li><p class="first">supérieur <tt class="docutils literal"><span class="pre">&gt;</span></tt></p>
</li>
<li><p class="first">inférieur ou égal <tt class="docutils literal"><span class="pre">&lt;=</span></tt></p>
</li>
<li><p class="first">supérieur ou égal <tt class="docutils literal"><span class="pre">&gt;=</span></tt></p>
</li>
<li><dl class="first docutils">
<dt>pour les chaîne de caractères</dt>
<dd><ul class="first last simple">
<li>commence par <tt class="docutils literal"><span class="pre">starts</span></tt></li>
<li>finit par <tt class="docutils literal"><span class="pre">ends</span></tt></li>
<li>corresponds à <tt class="docutils literal"><span class="pre">matches</span></tt> (test avec une expression régulière)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Test</dt>
<dd><ul class="first last simple">
<li>est égal à une constante <tt class="docutils literal"><span class="pre">is</span> <span class="pre">constant()</span></tt></li>
<li>est définit <tt class="docutils literal"><span class="pre">is</span> <span class="pre">defined</span></tt></li>
<li>est divisible par <tt class="docutils literal"><span class="pre">is</span> <span class="pre">divisible</span> <span class="pre">by()</span></tt></li>
<li>est vide <tt class="docutils literal"><span class="pre">is</span> <span class="pre">empty</span></tt></li>
<li>est un nombre pair <tt class="docutils literal"><span class="pre">is</span> <span class="pre">even</span></tt></li>
<li>est un nombre impair <tt class="docutils literal"><span class="pre">is</span> <span class="pre">odd</span></tt></li>
<li>est itérable <tt class="docutils literal"><span class="pre">is</span> <span class="pre">iterable</span></tt></li>
<li>est null <tt class="docutils literal"><span class="pre">is</span> <span class="pre">null</span></tt></li>
<li>est identique à <tt class="docutils literal"><span class="pre">is</span> <span class="pre">same</span> <span class="pre">as()</span></tt> (équivalent du <tt class="docutils literal"><span class="pre">===</span></tt> PHP)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Autres opérateurs</dt>
<dd><ul class="first last">
<li><p class="first">crée un séquence <tt class="docutils literal"><span class="pre">..</span></tt> (équivalent de la fonction range) <tt class="docutils literal"><span class="pre">1..4</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4]</span></tt></p>
</li>
<li><p class="first">applique un filtre <tt class="docutils literal"><span class="pre">|</span></tt></p>
</li>
<li><p class="first">convertie les opérandes en chaînes de caractères et les concatènes <tt class="docutils literal"><span class="pre">~</span></tt>. <tt class="docutils literal"><span class="pre">&quot;Hello</span> <span class="pre">&quot;</span> <span class="pre">~</span> <span class="pre">name</span> <span class="pre">~</span> <span class="pre">&quot;!&quot;</span> <span class="pre">=</span> <span class="pre">&quot;Hello</span> <span class="pre">John!&quot;</span></tt></p>
</li>
<li><p class="first">récupère un attribut d&#8217;un objet <tt class="docutils literal"><span class="pre">.</span></tt> ou <tt class="docutils literal"><span class="pre">[]</span></tt>. <tt class="docutils literal"><span class="pre">user.name</span></tt> ou <tt class="docutils literal"><span class="pre">user['name']</span></tt></p>
</li>
<li><dl class="first docutils">
<dt>opérateur tertiaire <tt class="docutils literal"><span class="pre">?:</span></tt> . <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">foo</span> <span class="pre">?</span> <span class="pre">'yes'</span> <span class="pre">:</span> <span class="pre">'no'</span> <span class="pre">}}</span></tt></dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">foo</span> <span class="pre">?:</span> <span class="pre">'no'</span> <span class="pre">}}</span></tt> est équivalent à <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">foo</span> <span class="pre">?</span> <span class="pre">foo</span> <span class="pre">:</span> <span class="pre">'no'</span> <span class="pre">}}</span></tt></li>
<li><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">foo</span> <span class="pre">?</span> <span class="pre">'yes'</span> <span class="pre">}}</span></tt> est équivalent à <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">foo</span> <span class="pre">?</span> <span class="pre">'yes'</span> <span class="pre">:</span> <span class="pre">''</span> <span class="pre">}}</span></tt></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Substitution de chaînes de caractères</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">#{}</span></tt> dans un chaîne ouverte ace des double quote. <tt class="docutils literal"><span class="pre">&quot;foo</span> <span class="pre">#{1</span> <span class="pre">+</span> <span class="pre">2}</span> <span class="pre">baz&quot;</span> <span class="pre">=</span> <span class="pre">&quot;foo</span> <span class="pre">2</span> <span class="pre">bar&quot;</span></tt></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Contrôle es espaces blancs</dt>
<dd><ul class="first last">
<li><p class="first">Supprime tous les espaces, tabulations et saut de lignes inutiles :</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">spaceless</span> <span class="pre">%}{%</span> <span class="pre">endspaceless</span> <span class="pre">%}</span></tt></p>
<blockquote>
<div><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# name = &#39;Jack&#39; #}</span>
<span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span>

<span class="c">{# user = array( &#39;name&#39; =&gt; &#39;Jack&#39; ) #}</span>
<span class="cp">{{</span> <span class="nv">user.name</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">user</span><span class="o">[</span><span class="s1">&#39;name&#39;</span><span class="o">]</span> <span class="cp">}}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">{%-</span></tt>, <tt class="docutils literal"><span class="pre">-%}</span></tt>, <tt class="docutils literal"><span class="pre">{{-</span></tt> et <tt class="docutils literal"><span class="pre">-}}</span></tt></p>
<blockquote>
<div><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# user = new User( &#39;Jack&#39; ) #}</span>
<span class="cp">{{</span> <span class="nv">user.name</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">user.getName</span> <span class="cp">}}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="doctrine.html" class="btn btn-neutral float-right" title="Doctrine et la base de donnée">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="services.html" class="btn btn-neutral" title="Les services"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Madeline VEYRENC.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>