<!DOCTYPE html>


<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Architecture de Symfony &mdash; Symfony 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/styles.css" type="text/css" />
    <link rel="stylesheet" href="_static/slides.css" type="text/css" />
    

    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/common.js"></script>
    <script type="text/javascript" src="_static/slides.js"></script>
    <script type="text/javascript" src="_static/sync.js"></script>
    <script type="text/javascript" src="_static/controller.js"></script>
    <script type="text/javascript" src="_static/init.js"></script>
    
    <link rel="top" title="Symfony 1.0.0 documentation" href="index.html" />
    <link rel="next" title="Création d&#39;un bundle" href="05_application_symfony.html" />
    <link rel="prev" title="Pré-requis et installation du framework" href="03_pre-requis_installation.html" /> 
  </head>
  <body>

<section
   id="slide_container"
   class='slides layout-regular'>


  <article class="slide level-1" id="architecture-de-symfony">
<h1>Architecture de Symfony</h1>

</article>
<article class="slide level-2" id="l-architecture-des-fichiers">
<h2>L'architecture des fichiers</h2>
<p>Dans les sources que nous venons de d'installer, il n'y a pas beaucoup de fichiers :</p>
<div class="highlight-bash"><div class="highlight"><pre>app
bin
composer.json
composer.lock
LICENSE
README.md
src
UPGRADE-2.2.md
UPGRADE-2.3.md
UPGRADE-2.4.md
UPGRADE.md
vendor
web
</pre></div>
</div>
<p>Voyons à quoi ils correspondent.</p>

</article>
<article class="slide level-3" id="le-repertoire-app">
<h3>Le répertoire <em>/app</em></h3>
<p>Ce répertoire contient tout ce qui concerne votre application, sauf son code source.</p>
<p>Le code source de votre application implémente ses fonctionnalités. Tout le reste comme la configuration, le cache, les logs, etc., c'est dans le répertoire <em>/app</em></p>

</article>
<article class="slide level-3" id="le-repertoire-bin">
<h3>Le répertoire <em>/bin</em></h3>
<p>Ce répertoire n'est pas tout le temps présent. Il contient des exécutables fournis par les bundles.</p>

</article>
<article class="slide level-3" id="le-repertoire-src">
<h3>Le répertoire <em>/src</em></h3>
<p>Voici le répertoire dans lequel on mettra notre code source ! Ce code est découpé en <em>bundles</em>.</p>
<p>Après l'installation de Symfony, ce répertoire n'est pas vide. Il contient un bundle de démo (Acme) et une ébauche de bundle. Ces deux bundles seront supprimés.</p>

</article>
<article class="slide level-3" id="le-repertoire-vendor">
<h3>Le répertoire <em>/vendor</em></h3>
<p>Ce répertoire contient toutes les librairies externes de notre application comme Symfony, Doctrine, Twig, SwiftMailer, etc.</p>
<div class="hint admonition">
<p class="first admonition-title">Qu'est ce qu'une librairie ?</p>
<p class="last">Un librairie est une boite noire qui rempli une fonction bien précise et dont on peut se servir dans notre code. On ne sais pas comment elle fonctionne, mais on sais comment s'en servir.</p>
</div>

</article>
<article class="slide level-3" id="le-repertoire-web">
<h3>Le répertoire <em>/web</em></h3>
<p>Ce répertoire contient tous les fichiers destinés aux visiteurs : image, CSS, Javascript, etc. Il contient également les contrôleurs frontaux <tt class="docutils literal"><span class="pre">app.php</span></tt> et <tt class="docutils literal"><span class="pre">app_dev.php</span></tt>. C'est le seul répertoire accessible aux visiteurs.</p>
<div class="hint admonition">
<p class="first admonition-title">Contrôleur frontal</p>
<p class="last">Le contrôleur front est le point d'entrée par lequel passe toutes les pages. Dans Symfony, il y en a deux : un pour le développement l'autre pour les autres environnement.</p>
</div>

</article>
<article class="slide level-3" id="les-fichiers-composer">
<h3>Les fichiers <em>/composer.*</em></h3>
<p>Le fichier <tt class="docutils literal"><span class="pre">composer.json</span></tt> contient les instructions destinées à composer pour qu'il installe les librairies externes. À chaque installation ou mise à jour de librairie, il écrit dans le fichier <tt class="docutils literal"><span class="pre">composer.lock</span></tt> les versions exactes de chaque librairie qu'il a installé. Ensuite, lors du déploiement de l'application sur les autres environnements, comme en production, on pourra installer les mêmes versions que lors des développements grâce à composer.</p>

</article>
<article class="slide level-3" id="les-fichiers-md">
<h3>Les fichiers <em>/*.md</em></h3>
<p>Le reste des fichiers contient de la documentation.</p>

</article>
<article class="slide level-2" id="architecture-conceptuelle">
<h2>Architecture conceptuelle</h2>
<p>Maintenant que nous avons vu comment s'organisait les fichiers de Symfony, nous allons voir comment s'organise l'exécution du code.</p>

</article>
<article class="slide level-3" id="architecture-mvc">
<h3>Architecture MVC</h3>
<p>MVC signifie Modèle/Vue/Contrôleur. C'est un découpage très répandu dans les frameworks web. L'idée est d'organiser le code en séparant les données, leurs présentations et leurs traitements. Cette séparation rends les applications, même complexes, plus facile à maintenir et à faire évoluer.</p>
<p>Elle se compose de trois couches :</p>
<dl class="docutils">
<dt>Le <strong>contrôleur</strong> (<em>controller</em>)</dt>
<dd>Son rôle est de générer la réponse à la requête HTTP demandée par le visiteur. Il analyse la requête du visiteur, et utilise les autres composants pour composer la réponse et la renvoie au visiteur.</dd>
</dl>
<ul>
<li><dl class="first docutils">
<dt>Le <strong>modèle</strong> (<em>model</em>)</dt>
<dd><p class="first last">Il est responsable des données et de tous les traitements faits sur les données. Rien d'autre dans l'application ne doit manipuler les données afin de garantir leur intégrité.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>La <strong>vue</strong> (<em>vue</em>)</dt>
<dd><p class="first last">Elle est chargée de générer les interfaces utilisateurs, généralement basées sur les données. Elle peut présenter les données sous plusieurs formes : HTML, json, XML, etc.</p>
</dd>
</dl>
</li>
</ul>

</article>
<article class="slide level-3" id="deroulement-d-une-requete-dans-symfony">
<h3>Déroulement d'une requête dans Symfony</h3>
<img alt="_images/symfony_request_flow.png" class="align-center" src="_images/symfony_request_flow.png" />
<ol class="arabic simple">
<li>Le visiteur demande une page ;</li>
<li>Le <strong>contrôleur frontal</strong> reçoit la requête, charge le <strong>Kernel</strong> et la lui transmet ;</li>
<li>Le <strong>Kernel</strong> demande au <strong>Router</strong> quel contrôleur&nbsp;exécuter pour la page demandée ;</li>
<li>Le <strong>Kernel</strong> exécute le <strong>contrôleur</strong>.</li>
<li>Le <strong>contrôleur</strong> retourne la réponse.</li>
</ol>
<div class="hint admonition">
<p class="first admonition-title">Le routeur</p>
<p class="last">C'est un composant Symfony qui a pour mission de faire la correspondance en les URL et les contrôleurs.</p>
</div>

</article>
<article class="slide level-2" id="les-bundles">
<h2>Les bundles</h2>
<p>Comme dit précédemment, un bundle contient tout le code source nécessaire pour implémenter la ou les fonctionnalités pour lesquelles il est prévue. Quand on dit tout le code source, il s'agit des contrôleurs, modèles, vues, classes personnelles, etc.
Tout ces éléments sont organisés dans des répertoires comme on peut le voir dans le bundle de démo qui se trouve dans <tt class="docutils literal"><span class="pre">Acme/DemoBundle</span></tt> :</p>
<div class="highlight-bash"><div class="highlight"><pre>Controller                          | Contrôleurs
└── DefaultController.php
DependencyInjection                 | Informations sur le bundle <span class="o">(</span>chargement automatique de la configuration par exemple<span class="o">)</span>
└── Configuration.php
Resources
├── config                          | Fichier de configuration du bundle
│   ├── routing.yml
│   └── services.yml
├── doc                             | Documentation du bundle
│   └── index.rst
├── public                          | Fichiers à destination des internautes
│   ├── css
│   ├── images
│   └── js
├── translations                    | Fichiers de traductions
│   └── messages.fr.xlf
└── views                           | Template Twig
    └── Default
        └── index.html.twig
Tests                               | Tests
└── Controller
    └── DefaultControllerTest.php
</pre></div>
</div>

</article>


</section>

<section id="slide_notes">

</section>

  </body>
</html>